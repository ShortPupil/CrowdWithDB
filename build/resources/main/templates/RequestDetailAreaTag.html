<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>RequesterDetailAreaTag</title>
<style type="text/css">
ul.sonarmenu{ /* Inspired by http://tympanus.net/codrops/2013/08/06/creative-link-effects */  
    list-style: none;  
}  
  
ul.sonarmenu li{  
 display: inline;  
}  
  
ul.sonarmenu a{  
    position: relative;  
    display: inline-block;  
    color: black; /* font color */  
    text-decoration: none;  
    margin: 10px 20px;  
    text-transform: uppercase;  
    font-family: 'Raleway', sans-serif; /* font style (uses Google fonts) */  
    font-size: 22px; /* font size */  
    letter-spacing: 2px; /* letter spacing */  
    border-bottom: 2px solid transparent; /* Bottom border style */  
}  
  
ul.sonarmenu a:hover, ul.sonarmenu a:focus{  
    outline: none;  
    border-bottom: 2px solid #eee; /* Bottom border style on hover */  
}  
  
ul.sonarmenu a::before, ul.sonarmenu a:after{ /* shared style for two circles */  
    position: absolute;  
    top: 50%;  
    left: 50%;  
    width: 70px; /* width of outer circle */  
    height: 70px; /* height of outer circle */  
    border: 12px double rgba(0,0,0,0.1); /* style and color of circles */  
    border-radius: 50%;  
    content: '';  
    opacity: 0;  
    -webkit-transform: translateX(-50%) translateY(-50%) scale(0.2);  
    -moz-transform: translateX(-50%) translateY(-50%) scale(0.2);  
    transform: translateX(-50%) translateY(-50%) scale(0.2);  
}  
  
ul.sonarmenu a:after{ /* inner circle specific CSS */  
    width: 60px; /* width of inner circle */  
    height: 60px; /* width of inner circle */  
    border-width: 6px;  
    -webkit-transform: translateX(-50%) translateY(-50%) scale(0.8);  
    -moz-transform: translateX(-50%) translateY(-50%) scale(0.8);  
    transform: translateX(-50%) translateY(-50%) scale(0.8);  
}  
  
ul.sonarmenu a:hover:before, ul.sonarmenu a:hover:after{  
    -webkit-animation: pulsate 1.2s infinite; /* animation name duration loop etc */  
    -moz-animation: pulsate 1.2s infinite;  
    -ms-animation: pulsate 1.2s infinite;  
    animation: pulsate 1.2s infinite;  
}  
  
/* ### Keyframe animations ### */  
  
@-webkit-keyframes pulsate{  
  
  30%{  
    opacity: 1;  
    -webkit-transform: translateX(-50%) translateY(-50%) scale(1);  
  }  
  
    100%{  
    opacity: 0.3;  
    -webkit-transform: translateX(-50%) translateY(-50%) scale(0.5);  
    }  
  
}  
  
@-moz-keyframes pulsate{  
  
  30%{  
    opacity: 1;  
    -moz-transform: translateX(-50%) translateY(-50%) scale(1);  
  }  
  
    100%{  
    opacity: 0.3;  
    -moz-transform: translateX(-50%) translateY(-50%) scale(0.5);  
    }  
  
}  
  
@-ms-keyframes pulsate{  
  
  30%{  
    opacity: 1;  
    -ms-transform: translateX(-50%) translateY(-50%) scale(1);  
  }  
  
    100%{  
    opacity: 0.3;  
    -ms-transform: translateX(-50%) translateY(-50%) scale(0.5);  
    }  
  
}  
  
@-keyframes pulsate{  
  
  30%{  
    opacity: 1;  
    transform: translateX(-50%) translateY(-50%) scale(1);  
  }  
  
    100%{  
    opacity: 0.3;  
    transform: translateX(-50%) translateY(-50%) scale(0.5);  
    }  
  
}

body{
background:#f6f6f6;
}

.title{
color:black;
font-size:25px;
}

div.polaroid {
  width: 90%;
  background-color: white;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin-bottom: 25px;
}

div.container {
  text-align: center;
  padding: 10px 20px;
}

.preButton {
  display: inline-block;
  border-radius: 4px;
  background-color: #f4511e;
  border: none;
  color: #FFFFFF;
  text-align: center;
  font-size: 28px;
  padding: 20px;
  width: 150px;
  transition: all 0.5s;
  cursor: pointer;
  margin: 5px;
}

.preButton span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;
}

.preButton span:after {
  content: '«';
  position: absolute;
  opacity: 0;
  top: 0;
  left: -20px;
  transition: 0.5s;
}

.preButton:hover span {
  padding-left: 25px;
}

.preButton:hover span:after {
  opacity: 1;
  left: 0;
}

.nextButton {
  display: inline-block;
  border-radius: 4px;
  background-color: #f4511e;
  border: none;
  color: #FFFFFF;
  text-align: center;
  font-size: 28px;
  padding: 20px;
  width: 150px;
  transition: all 0.5s;
  cursor: pointer;
  margin: 5px;
}

.nextButton span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;
}

.nextButton span:after {
  content: '»';
  position: absolute;
  opacity: 0;
  top: 0;
  right: -20px;
  transition: 0.5s;
}

.nextButton:hover span {
  padding-right: 25px;
}

.nextButton:hover span:after {
  opacity: 1;
  right: 0;
}

#rcorners {
    border-radius: 15px 50px;
    padding: 20px; 
    width: 200px;
    height: 150px; 
    border:none;
  
}

#frame{
padding:20px;
width:300px;
height:200px;
border:none;
background-color:white;
}

a:link {text-decoration:none;}    /* unvisited link */
a:visited {text-decoration:none;} /* visited link */
a:hover {text-decoration:underline;}   /* mouse over link */
a:active {text-decoration:underline;}  /* selected link */

#progressbar {
                position: absolute;
               
                height: 30px;
                width: 200px;
                border: 1px solid #63B8FF;
                border-radius: 5px;
                text-align: center;
                line-height: 10px;
                font-size: 0.8em;
            }

            #progress {
                position: absolute;
                /*  border:1px solid;*/
                height: 100%;
                width: 0;
                background: #BFEFFF;
                border-radius: 5px;
                z-index: -1;
            }

            #progress {
                background-size: 30px 30px;
                background-image: -webkit-linear-gradient(-45deg, #63B8FF, #63B8FF 25%, #BFEFFF 25%, #BFEFFF 50%, #63B8FF 50%, #63B8FF 75%, #BFEFFF 75%, #BFEFFF);
                background-image: -moz-linear-gradient(-45deg, #63B8FF, #63B8FF 25%, #BFEFFF 25%, #BFEFFF 50%, #63B8FF 50%, #63B8FF 75%, #BFEFFF 75%, #BFEFFF);
                background-image: linear-gradient(-45deg, #63B8FF, #63B8FF 25%, #BFEFFF 25%, #BFEFFF 50%, #63B8FF 50%, #63B8FF 75%, #BFEFFF 75%, #BFEFFF);
                -webkit-animation: animate 1.5s linear infinite;
                -moz-animation: animate 1.5s linear infinite;
                animation: animate 1.5s linear infinite;
            }

            @-webkit-keyframes animate {
                from {
                    background-position: 0 0;
                }
                to {
                    background-position: 60px 30px;
                }
            }

            @-moz-keyframes animate {
                from {
                    background-position: 0 0;
                }
                to {
                    background-position: 60px 30px;
                }
            }

            @keyframes animate {
                from {
                    background-position: 0 0;
                }
                to {
                    background-position: 60px 30px;
                }
            }
</style>
</head>

<body>
<script th:inline="javascript">
/*<![CDATA[*/
var processState=/*[[${processState}]]*/ 0;
var dataCollectionList=[];
var counter=0;
var length=0;
window.onload=function(){
	var now = 0;
    var timer = setInterval(function() {
        if(now == 100) {
            clearInterval(timer);
            window.location.href = '#';
        } else {
        	if(now<processState){
            now += 1;
            progressfn(now);
        }
        }
    }, 50);	
	dataCollectionList= /*[[${dataCollectionList}]]*/ [];
	counter=0;
	length=dataCollectionList.length;
	
	var workerName=dataCollectionList[counter].workername;
	var question=dataCollectionList[counter].question;
	var path=dataCollectionList[counter].path;
	var tags=dataCollectionList[counter].tags;
	var workerId=dataCollectionList[counter].id;
	
	
	var img=new Image();
	img.src=path;
	var canvas=document.getElementById("canvas");
	canvas.height=500;
	canvas.width=500;
	img.onload=function(){
		var cxt=document.getElementById("canvas").getContext("2d");
		cxt.lineWidth = 4; 
		cxt.strokeStyle = 'rgba(255,0,0,0.7)'; 
		cxt.lineCap="round";
		
		cxt.drawImage(this,0,0,500,500);
		for(var index in tags){
			var tag=JSON.parse(tags[index]);
			cxt.moveTo(tag[0].x,tag[0].y);
			for(var index2 in tag){
				cxt.lineTo(tag[index2].x,tag[index2].y);
			}
			cxt.stroke();
		}
	}
	//显示
	document.getElementById("questionLabel").innerHTML=question;
	
	document.getElementById("workerNameLabel").innerHTML=workerName;
	
	document.getElementById("workerIDLabel").innerHTML=workerId;
	
	document.getElementById("linkToWorkerDetail").href="WorkerDetail?workerid="+workerId;
	}
	
function progressfn(cent) {
    var progressbar = document.getElementById("progressbar");
    progressbar = progressbar.getElementsByTagName("p");
    progressbar[0].innerHTML = cent + "%";
    var progress = document.getElementById("progress");
    progress.style.width = cent + "%";
}

function pre(){
	if(counter==0)
		counter=length-1;
	else
		counter--;
	
	document.getElementById("canvas").height=document.getElementById("canvas").height;
	
	var workerName=dataCollectionList[counter].workername;
	var question=dataCollectionList[counter].question;
	var path=dataCollectionList[counter].path;
	var tags=dataCollectionList[counter].tags;
	var workerId=dataCollectionList[counter].id;
	
	var img=new Image();
	img.src=path;
	img.onload=function(){
		var cxt=document.getElementById("canvas").getContext("2d");
		cxt.lineWidth = 4; 
		cxt.strokeStyle = 'rgba(255,0,0,0.7)'; 
		cxt.lineCap="round";
		
		cxt.drawImage(this,0,0,500,500);
		for(var index in tags){
			var tag=JSON.parse(tags[index]);
			cxt.moveTo(tag[0].x,tag[0].y);
			for(var index2 in tag){
				cxt.lineTo(tag[index2].x,tag[index2].y);
			}
			cxt.stroke();
		}
	}
	//显示
	document.getElementById("questionLabel").innerHTML=question;
	
	document.getElementById("workerNameLabel").innerHTML=workerName;
	
	document.getElementById("workerIDLabel").innerHTML=workerId;
	
	document.getElementById("linkToWorkerDetail").href="WorkerDetail?workerid="+workerId;
}

function next(){
	if(counter==length-1)
		counter=0;
	else
		counter++;
	
	document.getElementById("canvas").height=document.getElementById("canvas").height;
	
	var workerName=dataCollectionList[counter].workername;
	var question=dataCollectionList[counter].question;
	var path=dataCollectionList[counter].path;
	var tags=dataCollectionList[counter].tags;
	var workerId=dataCollectionList[counter].id;
	
	var img=new Image();
	img.src=path;
	img.onload=function(){
		var cxt=document.getElementById("canvas").getContext("2d");
		cxt.lineWidth = 4; 
		cxt.strokeStyle = 'rgba(255,0,0,0.7)'; 
		cxt.lineCap="round";
		
		cxt.drawImage(this,0,0,500,500);
		for(var index in tags){
			var tag=JSON.parse(tags[index]);
			cxt.moveTo(tag[0].x,tag[0].y);
			for(var index2 in tag){
				cxt.lineTo(tag[index2].x,tag[index2].y);
			}
			cxt.stroke();
		}
	}
	//显示
	document.getElementById("questionLabel").innerHTML=question;
	
	document.getElementById("workerNameLabel").innerHTML=workerName;
	
	document.getElementById("workerIDLabel").innerHTML=workerId;
	
	document.getElementById("linkToWorkerDetail").href="WorkerDetail?workerid="+workerId;
}
/*]]>*/
</script>


<div style="margin-left:9%">
<p class="title"><img src="illustrate/logo.jpg" height="100" width="120">欢迎您加入我们！</p>
</div>
<div style="margin-left:45%">  
<ul class="sonarmenu">  

<li><a href="RequesterHome" id="homePage">主页</a></li>
<li><a href="RequestManage" id="requestManage">任务管理</a></li>  
<li><a href="RequestCreate" id="newRequest">新任务</a></li>  
<li><a href="RequesterCenter" id="requesterCenter">个人中心</a></li> 
  
</ul>  
</div>
<hr style="height:10px;border:none;border-top:10px groove skyblue;" />

<div style="position:absolute;right:0;top:0">
<label>您好!</label><label style="font-size:20px" id="idLabel">[[${id}]]</label><a href="RequesterLogin" style="font-size:20px">登出</a>
</div>

<div style="float:left;margin-left:20%">
 <div align="center">
 <label style="font-size:20px" id="questionLabel"></label>
 </div>
 <br>
 <div align="center" >



 </div>
 
</div>

<div style="float:right;margin-right:10%;margin-top:2%">


<fieldset id="rcorners" style="box-shadow: 10px 10px 5px #888888;">
<div align="center">
<br>
<label style="font-size:25px">已完成</label>
</div>
<br>
 <div id="progressbar" align="center">
            <div id='progress'></div>
            <p></p>
        </div>
</fieldset>

<br>
<p id="frame" style="font-size:25px;text-align:center;box-shadow: 10px 10px 5px #888888;">
工人信息
<br>
<br>
<span style="float:left">
<img src="illustrate/originalHead2.jpg" width="100px" height="80px">
</span>

<span style="float:right;font-size:17px;">
姓名：<label style="font-size:17px" id="workerNameLabel"></label>
<br>
<br>
ID：<label style="font-size:17px" id="workerIDLabel"></label>
</span>
<br>
<br>
<a style="font-size:15px;" id="linkToWorkerDetail">点击查看详细信息»</a>
</p>
</div>
<canvas id="canvas" style="height:500;width:500;margin-left:7%"></canvas>
<div style="margin-left:14%">
 <button class="preButton" onclick="pre()">
 <span>
 上一张
 </span>
 </button>
 <button class="nextButton" onclick="next()">
 <span>
 下一张
 </span>
 </button>
 </div>
</body>
</html>